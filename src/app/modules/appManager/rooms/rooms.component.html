<!--
<ul *ngIf="auth.user$ | async as user">
  <li>{{ user.name }}</li>
  <li>{{ user.email }}</li>
  <li></li>
</ul>
<pre>{{ auth.idTokenClaims$ | async  | json }}</pre>
-->


<main class="flex w-full ">
    <div class="p-4 w-full overflow-y-auto overflow-x-hidden ">
        <div class="flex justify-between items-end mb-4">
            <h1 class="text-xl"> Rooms </h1>
            <button mat-raised-button color="primary" (click)="openEditDialog({})">Add Client</button>
        </div>
        <mat-accordion>

            <mat-expansion-panel
                *ngFor="let room of rooms">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        {{ room?.title }}  <small class="px-2"> ({{ room?.conversation?.length}})</small>
                    </mat-panel-title>
                    <mat-panel-description>
                        {{ room?._id }}
                    </mat-panel-description>
                </mat-expansion-panel-header>

                <p>Room prompt:</p>
                <div class="w-200 overflow-auto bg-accent-800 px-4 py-2 text-white min-h-20">
                    <pre class=" max-w[600px]">{{ room.configuration?.prompt  }}</pre>
                </div>
                <p>Room Details:</p>
                <div class="w-200 overflow-auto bg-accent-800 px-4 py-2 text-white">
                    <pre class=" max-w[600px]">{{ prepareRoom(room) | json }}</pre>
                </div>
                <p>configuration:</p>
                <div class="w-200 overflow-auto bg-accent-800 px-4 py-2 text-white">
                    <pre class=" max-w[600px]">{{ room.configuration| json }}</pre>
                </div>


                <div class="mt-3 pt-3 border-t flex justify-end gap-2">
                    <button mat-raised-button (click)="delete(room)">Delete</button>
                    <button mat-raised-button (click)="openEditDialog(room)">Edit</button>
                </div>
            </mat-expansion-panel>
        </mat-accordion>
    </div>
</main>


